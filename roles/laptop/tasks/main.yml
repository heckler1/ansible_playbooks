- name: Add Spotify signing keys
  apt_key:
    keyserver: hkp://keyserver.ubuntu.com:80
    id: '{{ item }}'
    state: present
  with_items:
    - BBEBDCB318AD50EC6865090613B00F1FD2C19886
    - 0DF731E45CE24F27EEEB1450EFDC8610341D9410

- name: Add package repositories
  apt_repository:
    repo: '{{ item }}'
    state: present
  with_items:
  - ppa:nextcloud-devs/client
  - ppa:remmina-ppa-team/remmina-next
  - deb http://repository.spotify.com stable non-free
  - ppa:snwh/pulp

- name: Update repositories
  apt:
    update_cache: yes

- name: Install Apt packages
  apt:
    name: nextcloud-client,remmina,remmina-plugin-rdp,remmina-plugin-gnome,libfreerdp-plugins-standard,minicom,spotify-client,paper-icon-theme,paper-cursor-theme,paper-gtk-theme
    state: present

- name: Install .deb Packages
  apt:
    deb: '{{ item }}'
  with_items:
  - https://go.microsoft.com/fwlink/?LinkID=760868
  - https://downloads.slack-edge.com/linux_releases/slack-desktop-2.8.2-amd64.deb
  - http://download.virtualbox.org/virtualbox/5.2.0/virtualbox-5.2_5.2.0-118431~Ubuntu~xenial_amd64.deb

- name: Auto-remove orphaned dependencies and repo listings
  apt:
    autoremove: yes
    autoclean: yes